(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{386:function(e,t,s){},392:function(e,t,s){"use strict";s(386)},397:function(e,t,s){"use strict";s.r(t);s(38),s(40),s(86),s(12),s(26),s(159),s(39),s(87);var a=s(399),l=s.n(a),i=s(18),n=s(7),c={name:"SearchCategoriesAndTags",components:{Multiselect:l.a},props:{tags:{type:Array,default:()=>["list","of","tags","#"]}},data:()=>({selectedTags:[],searchedWords:[],selectedInput:0,tagsLimit:99}),computed:{...Object(i.b)("appState",["categoriesList","tagsList","activeCategory","activeTags","searchedText"]),resolvedTags(){return this.tags.map(e=>({name:e.name,value:e.slug}))},queryProptertyWatchlist(){return`${this.activeTags}|${this.searchedText}`}},watch:{queryProptertyWatchlist(){this.updateTagsWithQuery()}},created(){this.calculateTagsLimit(),"undefined"!=typeof window&&window.addEventListener("resize",this.tagsEvent)},destroyed(){"undefined"!=typeof window&&window.removeEventListener("resize",this.tagsEvent)},methods:{tagsEvent(){["xxl"].includes(this.$mq)&&this.calculateTagsLimit()},calculateTagsLimit(e){let t=this.tagsList.length;if("undefined"!=typeof window&&this.$refs.select1){const s=this.$refs.select1.$el.childNodes[2],a=window.getComputedStyle(s),l=s.getBoundingClientRect().width-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight),i=(e||this.selectedTags).map(e=>e.name).map(e=>46+12*e.length);if(i.reduce((e,t)=>e+t,0)>l){let e=75;for(let s=0;s<i.length&&!(e+i[s]>l);s++)e+=i[s],t=s+1}}this.tagsLimit=t},updateTagsWithQuery(){const{query:e}=this.$route,t=e.tags?e.tags.split(","):[],s=e.search?e.search.split(","):[],a=this.tagsList.map(e=>e.slug),l=this.selectedTags.map(e=>e.value),i=[...t,...s].filter(e=>!l.includes(e)),n=l.filter(e=>a.includes(e)&&!t.includes(e)),c=l.filter(e=>!a.includes(e)&&!s.includes(e)),r=this.selectedTags.filter(e=>!n.includes(e.value)&&!c.includes(e.value));i.forEach(e=>{const t=this.tagsList.find(t=>t.slug===e);r.push({name:t?t.name:e,value:t?t.slug:e})}),this.selectedTags=r},setActiveCategory(e){const t={category:e.name,method:"filter-select"};n.a.trackEvent(n.a.events.FILTER,t),this.$store.commit("appState/setActiveCategory",this.categoriesList.map(e=>e.slug).includes(e.slug)?e:"")},removeTag(e){(this.activeTags.length>0||this.searchedText.length>0)&&(this.selectedTags=this.selectedTags.filter(t=>t.value!==e.value),this.handleSearch())},handleSearch(){const e=this.selectedTags.map(e=>e.value),t=this.tagsList.map(e=>e.slug),s=e.filter(e=>t.includes(e)),a=e.filter(e=>!t.includes(e));this.$store.commit("appState/setActiveTags",s),this.$store.commit("appState/setSearchedText",a)},handleAddTag(e){const t={name:e,value:e},s={text:e,method:"filter-select"};n.a.trackEvent(n.a.events.FILTER,s),this.selectedTags.push(t),this.calculateTagsLimit([...this.selectedTags,t]),this.$refs.select2.focus()},focusOnSubmit(e){const t={tag:e.name,method:"filter-select"};n.a.trackEvent(n.a.events.FILTER,t),this.calculateTagsLimit(),this.$refs.select2.focus()},handleKeyUp(e){const t=this.selectedInput+e;let s=2;s=-1===e?t>=0?t:2:t<=2?t:0,2===s?(this.$refs.select2.focus(),this.selectedInput=2):this.$refs["select"+s].$el.focus()},setSelected(e){this.selectedInput=e}}},r=(s(392),s(4)),o=Object(r.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"mb-2"},[e._v("Filter items by type:")]),e._v(" "),t("div",{staticClass:"flex flex-col xl:flex-row",on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.handleKeyUp(-1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.handleKeyUp(1)}]}},[t("multiselect",{ref:"select0",staticClass:"mb-2 xl:mb-0 xl:mr-2 xl:max-w-xs",attrs:{value:""!==e.activeCategory?e.activeCategory:{name:"All content"},options:[{name:"All content"},...e.categoriesList],label:"name","track-by":"name",searchable:!1,"allow-empty":!1,"select-label":"Press 'enter' to select","deselect-label":""},on:{input:e.setActiveCategory,open:function(t){return e.setSelected(0)}}}),e._v(" "),t("multiselect",{ref:"select1",staticClass:"mb-2 xl:mb-0 xl:mr-2",attrs:{"tag-placeholder":"search for this text",placeholder:"Search for words or #tags","track-by":"name","custom-label":t=>e.tagsList.map(e=>e.name).includes(t.name)?"#"+t.name:t.name,limit:["xxl"].includes(e.$mq)?e.tagsLimit:e.tagsList.length,options:e.resolvedTags,multiple:!0,taggable:!0,"select-label":"Press 'enter' to select","deselect-label":"Press 'enter' to remove"},on:{tag:e.handleAddTag,remove:e.removeTag,select:e.focusOnSubmit,open:function(t){return e.setSelected(1)}},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}}),e._v(" "),t("button",{ref:"select2",staticClass:"h-full p-2 text-white font-semibold bg-blueGreen rounded hover:bg-blueGreenScreen transition duration-300 ease-in-out",on:{click:e.handleSearch,focus:function(t){return e.setSelected(2)}}},[e._v("\n      Search\n    ")])],1)])}),[],!1,null,null,null);t.default=o.exports}}]);